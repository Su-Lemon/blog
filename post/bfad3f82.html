<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>【Tools-Mujoco】创建自定义的Mujoco模型 - 爱吃猫的小鱼干的 Blog</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  
    <!-- Site Verification -->
    
        <meta name="google-site-verification" content="" />
    
        <meta name="google-site-verification" content="" />
    


  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Su-Lemon/sources/imgs/blog_style/favicon0.png" type="image/png" />
  <meta name="description" content="Mujoco是一个很好的仿真工具。你可能对它很熟悉，因为它强化学习领域受到众多学者的青睐，在OpenAI Gym中也有Mujoco的使用。 Mujoco提供了超快的动力学模拟，重点是接触动力学。它对于模拟机器人手臂和抓取任务特别有效，在模型预测控制和机器人模仿学习研究的文章中也颇具价值。">
<meta property="og:type" content="article">
<meta property="og:title" content="【Tools-Mujoco】创建自定义的Mujoco模型">
<meta property="og:url" content="https://su-lemon.gitee.io/post/bfad3f82.html">
<meta property="og:site_name" content="爱吃猫的小鱼干的 Blog">
<meta property="og:description" content="Mujoco是一个很好的仿真工具。你可能对它很熟悉，因为它强化学习领域受到众多学者的青睐，在OpenAI Gym中也有Mujoco的使用。 Mujoco提供了超快的动力学模拟，重点是接触动力学。它对于模拟机器人手臂和抓取任务特别有效，在模型预测控制和机器人模仿学习研究的文章中也颇具价值。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407165056.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407165919.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407171822.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407172745.png">
<meta property="article:published_time" content="2021-04-07T08:13:41.000Z">
<meta property="article:modified_time" content="2022-05-19T09:31:02.824Z">
<meta property="article:author" content="SuSu">
<meta property="article:tag" content="RL">
<meta property="article:tag" content="Tools">
<meta property="article:tag" content="Mujoco">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407165056.png">
  <link rel="stylesheet" href="/css/blog.css" type="text/css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1653276122641">
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head>

<body class="mdui-drawer-body-left">
  <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

  <!--鼠标点击烟花爆炸效果，需要引入jQuery-->
  
    <script type="text/javascript" src="/js/firework1.js"></script>
  

  <a target="_blank" rel="noopener" href="https://github.com/Su-Lemon" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url('https://cdn.jsdelivr.net/gh/Su-Lemon/sources/imgs/blog_style/background0.png')"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!-- <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a> -->
        <a href="/" title="SuSu" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources/imgs/blog_style/avatar0.png" alt="SuSu"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="SuSu">
            <img src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources/imgs/blog_style/avatar0.png" alt="SuSu" alt="SuSu">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>25</div>
        <div><span>标签</span>25</div>
        <div><span>分类</span>12</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        
    </div>
</div>
  
    <!-- 谷歌/百度搜索 -->
<!-- <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:su-lemon.github.io/blog" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div> -->

<!-- 站内搜索，需要引入jQuery -->

<div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search" >
        <form id="search-form">
                <input type="text" id="local-search-input" name="q" results="0" placeholder="站内搜索" class="input form-control" autocomplete="off" autocorrect="off"/>
                <!-- 清空/重置搜索框 -->
                <i class="fa fa-times" onclick="resetSearch()"></i>            
        </form>
        <div id="local-search-result"></div> <!-- 搜索结果区 -->
        <p class='no-result'>没有任何发现喵</p> <!-- 无匹配时显示，注意在 CSS 中设置默认隐藏 -->
    </div>
    
</div>

  
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://jq.qq.com/?_wv=1027&k=MivHmcOi" target="_blank" mdui-tooltip="{content: 'QQ群'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://space.bilibili.com/76586290" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/Su-Lemon/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CPlusPlus/">CPlusPlus</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Git/">Git</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/GitHub/">GitHub</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Hexo/">Hexo</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Latex/">Latex</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mac/">Mac</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Paper/">Paper</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Python/">Python</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/RL/">RL</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Robotics/">Robotics</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Tools/">Tools</a>
          <span class="category-list-count">3</span>
        </li>

        
      </ul>

    </div>
  </div>


  
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/AC/" style="font-size: 10px;">AC</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/CPlusPlus/" style="font-size: 10px;">CPlusPlus</a> <a href="/tags/FFmpeg/" style="font-size: 10px;">FFmpeg</a> <a href="/tags/GUI/" style="font-size: 10px;">GUI</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Latex/" style="font-size: 12.5px;">Latex</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Mac/" style="font-size: 12.5px;">Mac</a> <a href="/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/tags/Mujoco/" style="font-size: 10px;">Mujoco</a> <a href="/tags/PG/" style="font-size: 10px;">PG</a> <a href="/tags/Paper/" style="font-size: 10px;">Paper</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/RL/" style="font-size: 20px;">RL</a> <a href="/tags/Review/" style="font-size: 10px;">Review</a> <a href="/tags/Robotics/" style="font-size: 10px;">Robotics</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/Tmux/" style="font-size: 10px;">Tmux</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">博客部署</a> <a href="/tags/%E6%96%B9%E6%B3%95%E8%AE%BA/" style="font-size: 17.5px;">方法论</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size: 10px;">编程实践</a>
    </div>
    
  </div>

  
</aside>
    <script type="text/javascript" src="/js/search.js"></script>
    <div class="nexmoe-copyright">
        &copy; 2022 SuSu
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/Su-Lemon" target="_blank">Su-Lemon</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 50%;"> 
          <img data-src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources/imgs/cover/cover14.png" data-sizes="auto" alt="【Tools-Mujoco】创建自定义的Mujoco模型" class="lazyload">
          <h1>【Tools-Mujoco】创建自定义的Mujoco模型</h1>
      </div>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月07日</a>
    <a><i class="nexmoefont icon-areachart"></i>3.2k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 14 分钟</a>
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                
                
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sketchup%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">Sketchup设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BB%8E%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A8%A1%E5%9E%8B%E4%B8%AD%E4%BF%9D%E5%AD%98%E4%B8%80%E4%B8%AA%E5%8D%95%E7%8B%AC%E7%9A%84%E9%83%A8%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">如何从完整的机器人模型中保存一个单独的部件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%90%84%E7%BB%84%E4%BB%B6%E5%AF%BC%E5%87%BA%E4%B8%BA%E5%8D%95%E7%8B%AC%E7%9A%84stl"><span class="toc-number">3.1.</span> <span class="toc-text">将各组件导出为单独的STL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E7%BB%84%E4%BB%B6%E5%AE%9A%E4%BD%8D%E5%9C%A8%E5%8E%9F%E7%82%B9"><span class="toc-number">3.2.</span> <span class="toc-text">将组件定位在原点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E4%BD%A0%E7%9A%84xml%E6%A8%A1%E5%9E%8B"><span class="toc-number">4.</span> <span class="toc-text">建立你的XML模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#xml%E7%BB%93%E6%9E%84"><span class="toc-number">4.1.</span> <span class="toc-text">XML结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">一些问题和解决方法</span></a></li></ol>
                
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <p>Mujoco是一个很好的仿真工具。你可能对它很熟悉，因为它强化学习领域受到众多学者的青睐，在OpenAI Gym中也有Mujoco的使用。 Mujoco提供了超快的动力学模拟，重点是接触动力学。它对于模拟机器人手臂和抓取任务特别有效，在模型预测控制和机器人模仿学习研究的文章中也颇具价值。</p>
<a id="more"></a>
<h2 id="前言">前言</h2>
<p>Mujoco官网有一个常用的<a target="_blank" rel="noopener" href="http://www.mujoco.org/forum/index.php?resources/">模型库</a>，可以满足基本需求。但我们也可以针对特定的需求建立自己的模型，这在Mujoco中是比较容易的。定义一个模型有两个部分。</p>
<ol type="1">
<li>STL文件，这是机器人部件的3D模型（导入STL允许你创建个性化的Mujoco模型，如果你不打算这样做，那么可以直接从第二步开始，利用Mujoco中基本的几何图形——长方体、椭圆等快速建立简单的模型）；</li>
<li>XML文件，它规定了模型中的运动学和动态关系。</li>
</ol>
<p>对于STL的操作，我们使用SketchUp（草图大师），它是免费提供的，并且操作简单容易上手。</p>
<p>这篇文章将从SketchUp中的一些基本设置开始，完成将机器人模型拆分，导出为各个关节组件的STL文件的任务（假设你已经完成了3D建模），最终生成Mujoco XML机器人描述文件的步骤。</p>
<p>如果你还没有完成3D建模，不妨在网上快速搜索一下，有很多免费的3D模型可供下载使用。例如在Github、https://www.traceparts.com/en等网站寻找3D模型。本文不打算涉及任何3D建模的内容。</p>
<h2 id="sketchup设置">Sketchup设置</h2>
<ul>
<li><strong>导入时设置模型单位</strong></li>
</ul>
<p>导入你的STL模型之前，在打开文件窗口中中选择你的文件，然后点击导入旁边的选项按钮，选择模型所定义的单位。如果你导入模型却看不到它，很可能是导入过程中选择的单位不正确，模型实在是太小而无法看到。</p>
<center>
<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08); zoom:100%" src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407165056.png"/> <br>
<div style="color:orange; border-bottom: 1px solid #d9d9d9; display: inline-block; color: #999; padding: 2px;">
导入时设置模型单位
</div>
</center>
<ul>
<li><strong>设置导出的模型单位</strong></li>
</ul>
<p>Mujoco使用你的STL模型中指定的单位。当使用相同的单位时，事情通常是最简单的。要修改模型导出时的单位，请到窗口 &gt; 模型信息 &gt; 单位 &gt; 长度。</p>
<center>
<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08); zoom:100%" src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407165919.png"/> <br>
<div style="color:orange; border-bottom: 1px solid #d9d9d9; display: inline-block; color: #999; padding: 2px;">
设置导出时的模型单位
</div>
</center>
<ul>
<li><strong>测量精度</strong></li>
</ul>
<p>在SketchUp中进行任何测量之前，请在 模型信息 中改变你的测量精度，精度为最大的数字，以确保你得到准确的测量结果(在建立Mujoco XML时需要)。</p>
<ul>
<li><strong>禁用捕捉</strong>。</li>
</ul>
<p>自动捕捉往往带来一些问题，要禁用它，请进入模型信息 &gt; 单位，并取消点击 "长度捕捉 "和 "角度捕捉"。</p>
<ul>
<li><strong>Xray模式</strong></li>
</ul>
<p>将默认视图设置为X射线模式会很有帮助，这样在操作组件时就可以看到模型内部。请进入 样式 &gt; 默认样式 &gt; X射线。</p>
<h2 id="如何从完整的机器人模型中保存一个单独的部件">如何从完整的机器人模型中保存一个单独的部件</h2>
<p>一个常见的状况是你有一个完整的机器人3D模型（就像上面的示意图中的机器人一样）。在这种情况下，建立Mujoco模型的第一步是为机器人的每个组件生成单独的STL文件，你希望能够独立控制每一个组件的运动。对于这些组件的每个STL文件，我们希望它连接到关节的点在原点 <span class="math inline">\((0,0,0)\)</span> ，因为这样可以简化在XML中建立模型的过程，并使正确指定惯性属性变得更加容易。</p>
<p>如果你的3D模型已经被分解成每个独立的组件，那么你可以跳到以原点为中心的部分。</p>
<h3 id="将各组件导出为单独的stl">将各组件导出为单独的STL</h3>
<p>确保你已经解锁了模型。要做到这一点，请使用 选择工具 突出显示整个模型。右击模型，并选择炸开模型（或打散）。</p>
<center>
<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08); zoom:80%" src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407171822.png"/> <br>
<div style="color:orange; border-bottom: 1px solid #d9d9d9; display: inline-block; color: #999; padding: 2px;">
炸开模型
</div>
</center>
<p>要得到单独的组件。例如，选择整个手臂，然后删除其余部分。选择 文件 &gt; 导出 &gt; 三维模型 &gt; STL。点击文件格式右侧的 选项 ，导出你的模型时，<strong>一定不要把你的模型保存为ASCII格式，选择二进制</strong>。重复此操作，直到将每个部件导出为自己的STL。</p>
<center>
<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08); zoom:80%" src="https://cdn.jsdelivr.net/gh/Su-Lemon/sources@1.1/imgs/blog/20210407172745.png"/> <br>
<div style="color:orange; border-bottom: 1px solid #d9d9d9; display: inline-block; color: #999; padding: 2px;">
导出各个组件的STL文件
</div>
</center>
<h3 id="将组件定位在原点">将组件定位在原点</h3>
<p>对于每个组件，需要确定它的哪个位置将会连接到其它组件，即连接机器人其它部分的关节点位置。我们要设置STL，使这个点在原点。通过这样做，我们可以简化以后构建XML文件的过程。</p>
<p>最简单的方法是用移动工具点击对象上的一个点，输入[0, 0, 0]，然后按回车键。这将会把选定的点移动到原点。或者用移动工具点击对象上的一个点后，将其移动到坐标系原点。</p>
<p>当选择下一个关节点时，需要测量其坐标。我们需要知道每个组件关节点的所有偏移距离，以便建立XML文件，所以一定要记下来!</p>
<h2 id="建立你的xml模型">建立你的XML模型</h2>
<p>一个完整的Mujoco模拟器应该包含三部分：</p>
<ul>
<li>STL文件，即三维模型；</li>
<li>XML 文件，用于定义运动学和动力学关系；</li>
<li>模拟器构建的py文件，使用mujoco-py将XML model创建成可交互的环境，供（强化学习）算法调用。</li>
</ul>
<h3 id="xml结构">XML结构</h3>
<p>当你在构建你的XML文件时，<strong>最好参考官方说明<a target="_blank" rel="noopener" href="http://www.mujoco.org/book/XMLreference.html">Mujoco XML Reference</a></strong>。它是超级详细和彻底的，你主要需要<strong>关注官方对XML中各个标签的解释和它包含的各个属性的作用</strong>。这些内容主要包含在文档的asset和（world）body目录下。</p>
<p>在标准定义标签里面，我们主要使用以下三个部分。</p>
<ul>
<li><code>&lt;asset&gt;</code> ： 用<code>&lt;mesh&gt;</code> tag导入STL文件；</li>
<li><code>&lt;worldbody&gt;</code>：用<code>&lt;body&gt;</code>tag定义了所有的模拟器组件，包括灯光、地板以及你的机器人；</li>
<li><code>&lt;acutator&gt;</code>：定义可以执行运动的关节。定义的顺序需要按照运动学顺序来，比如多关节串联机器人以工具坐标附近的最后一个关节为joint0，依此类推。</li>
</ul>
<p>以下是一个XML的示例结构：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">&lt;mujoco</span><span class="ot"> model=</span><span class="st">&quot;example&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="co">&lt;!-- set some defaults for units and lighting --&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    <span class="kw">&lt;compiler</span><span class="ot"> angle=</span><span class="st">&quot;radian&quot;</span><span class="ot"> meshdir=</span><span class="st">&quot;meshes&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="co">&lt;!-- 导入STL文件 --&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span class="kw">&lt;asset&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>        <span class="kw">&lt;mesh</span><span class="ot"> file=</span><span class="st">&quot;base.STL&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>        <span class="kw">&lt;mesh</span><span class="ot"> file=</span><span class="st">&quot;link1.STL&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>        <span class="kw">&lt;mesh</span><span class="ot"> file=</span><span class="st">&quot;link2.STL&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    <span class="kw">&lt;/asset&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    <span class="co">&lt;!-- 定义所有模拟器组件 --&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    <span class="kw">&lt;worldbody&gt;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>        <span class="co">&lt;!-- 灯光 --&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>        <span class="kw">&lt;light</span><span class="ot"> directional=</span><span class="st">&quot;true&quot;</span><span class="ot"> pos=</span><span class="st">&quot;-0.5 0.5 3&quot;</span><span class="ot"> dir=</span><span class="st">&quot;0 0 -1&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a>        <span class="co">&lt;!-- 添加地板，这样我们就不会凝视深渊 --&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>        <span class="kw">&lt;geom</span><span class="ot"> name=</span><span class="st">&quot;floor&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> size=</span><span class="st">&quot;1 1 1&quot;</span><span class="ot"> type=</span><span class="st">&quot;plane&quot;</span><span class="ot"> rgba=</span><span class="st">&quot;1 0.83 0.61 0.5&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>        <span class="co">&lt;!-- the ABR Control Mujoco interface expects a hand mocap --&gt;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>        <span class="kw">&lt;body</span><span class="ot"> name=</span><span class="st">&quot;hand&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> mocap=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>            <span class="kw">&lt;geom</span><span class="ot"> type=</span><span class="st">&quot;box&quot;</span><span class="ot"> size=</span><span class="st">&quot;.01 .02 .03&quot;</span><span class="ot"> rgba=</span><span class="st">&quot;0 .9 0 .5&quot;</span><span class="ot"> contype=</span><span class="st">&quot;2&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>        <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a>        <span class="co">&lt;!-- 构建串联机器人 --&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a><span class="co">        &lt;body name=&quot;base&quot; pos=&quot;0 0 0&quot;&gt;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="co">            &lt;geom name=&quot;link0&quot; type=&quot;mesh&quot; mesh=&quot;base&quot; pos=&quot;0 0 0&quot;/&gt;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a><span class="co">            &lt;inertial pos=&quot;0 0 0&quot; mass=&quot;0&quot; diaginertia=&quot;0 0 0&quot;/&gt;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a><span class="co">            &lt;!</span><span class="er">--</span><span class="co"> nest each child piece inside the parent body tags --&gt;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>            <span class="kw">&lt;body</span><span class="ot"> name=</span><span class="st">&quot;link1&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>                <span class="co">&lt;!-- this joint connects link1 to the base --&gt;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a>                <span class="kw">&lt;joint</span><span class="ot"> name=</span><span class="st">&quot;joint0&quot;</span><span class="ot"> axis=</span><span class="st">&quot;0 0 1&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>                <span class="kw">&lt;geom</span><span class="ot"> name=</span><span class="st">&quot;link1&quot;</span><span class="ot"> type=</span><span class="st">&quot;mesh&quot;</span><span class="ot"> mesh=</span><span class="st">&quot;link1&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> euler=</span><span class="st">&quot;0 3.14 0&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a>                <span class="kw">&lt;inertial</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> mass=</span><span class="st">&quot;0.75&quot;</span><span class="ot"> diaginertia=</span><span class="st">&quot;1 1 1&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>                <span class="kw">&lt;body</span><span class="ot"> name=</span><span class="st">&quot;link2&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a>                    <span class="co">&lt;!-- this joint connects link2 to link1 --&gt;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>                    <span class="kw">&lt;joint</span><span class="ot"> name=</span><span class="st">&quot;joint1&quot;</span><span class="ot"> axis=</span><span class="st">&quot;0 0 1&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>                    <span class="kw">&lt;geom</span><span class="ot"> name=</span><span class="st">&quot;link2&quot;</span><span class="ot"> type=</span><span class="st">&quot;mesh&quot;</span><span class="ot"> mesh=</span><span class="st">&quot;link2&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> euler=</span><span class="st">&quot;0 3.14 0&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a>                    <span class="kw">&lt;inertial</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> mass=</span><span class="st">&quot;0.75&quot;</span><span class="ot"> diaginertia=</span><span class="st">&quot;1 1 1&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a>                    <span class="co">&lt;!-- the ABR Control Mujoco interface uses the EE body to --&gt;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a>                    <span class="co">&lt;!-- identify the end-effector point to control with OSC--&gt;</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>                    <span class="kw">&lt;body</span><span class="ot"> name=</span><span class="st">&quot;EE&quot;</span><span class="ot"> pos=</span><span class="st">&quot;0 0.2 0.2&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a>                        <span class="kw">&lt;inertial</span><span class="ot"> pos=</span><span class="st">&quot;0 0 0&quot;</span><span class="ot"> mass=</span><span class="st">&quot;0&quot;</span><span class="ot"> diaginertia=</span><span class="st">&quot;0 0 0&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a>                    <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a>                <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a>            <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a>        <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a>    <span class="kw">&lt;/worldbody&gt;</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true"></a>    <span class="co">&lt;!-- 定义关节上的执行器 --&gt;</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true"></a>    <span class="kw">&lt;actuator&gt;</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true"></a>        <span class="kw">&lt;motor</span><span class="ot"> name=</span><span class="st">&quot;joint0_motor&quot;</span><span class="ot"> joint=</span><span class="st">&quot;joint0&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true"></a>        <span class="kw">&lt;motor</span><span class="ot"> name=</span><span class="st">&quot;joint1_motor&quot;</span><span class="ot"> joint=</span><span class="st">&quot;joint1&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true"></a>    <span class="kw">&lt;/actuator&gt;</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true"></a><span class="er">&lt;</span>/mujoco&gt;</span></code></pre></div>
<ul>
<li><p><strong>设置body position 和 geoms </strong></p>
<p>在<code>&lt;body&gt;</code>标签上的pos属性中设置与前一个<code>body</code>的偏移量，而不是在<code>geoms</code>上。在<code>&lt;joint&gt;</code>上你就可以设置<code>pos="0 0 0"</code>，这有助于简化后面的调试。</p>
<p>在每个主体部分，你可以有多个<code>&lt;joint&gt;</code>和<geom>。在同一主体上定义的<code>geom</code>将被融合在一起。如果你有几个融合在一起的geom的特定惯性属性，你必须为每个<code>geom</code>创建一个</p>
<body>
<p>，以便能够实例化它们自己的<code>&lt;inertial&gt;</code>标签。否则，建议将它们都放在同一个</p>
<body>
<p>中，以优化仿真速度。</p></li>
<li><p><strong>Orientation and inertia（方向和惯性）</strong></p>
<p>你可能需要旋转STLs，以便在您构建时将它们与机器人的其余部分正确对齐。你可以在<code>&lt;body&gt;</code>或<code>&lt;geom&gt;</code>标签中进行。如果你使用<code>&lt;inertial&gt;</code>标签，那么建议使用<code>&lt;geom&gt;</code>标签内的euler参数，而不是在<code>&lt;body&gt;</code>标签内。如果你在 <code>&lt;body&gt;</code> 标签中指定了旋转，还需要将相同的旋转应用于 <code>&lt;inertia&gt;</code> 参数，这使得事情变得复杂。</p>
<p>如果您没有提供 <code>&lt;inertial&gt;</code> 标签，惯性属性将由 geom 推断。</p></li>
<li><p><strong>Contype 和 conaffinity</strong></p>
<p>如果你不想让模型中的geom与其他部件发生碰撞，可以在geom标签上设置contype和conaffinity参数。如果你有一个紧密贴合的3D模型，并且遇到摩擦的问题，这可以很方便。</p></li>
<li><p><strong>ABR控制的End-effector tag（末端执行器）标签</strong></p>
<p>如果你要使用ABR控制库操作空间控制器，你需要在你要控制的机器人的点上添加一个标签<code>&lt;body name="EE" pos="0 0 0"&gt;</code>。通常是手。</p></li>
</ul>
<p>这些设置在 <strong><a target="_blank" rel="noopener" href="http://www.mujoco.org/book/XMLreference.html">Mujoco XML Reference</a></strong> 都有简洁明了的说明。</p>
<p>一旦你添加了你的机器人身体部分，保存XML并用Mujoco仿真器仿真测试，指令类似于这样（Mujoco simulate的路径和xml文件的路径） <code>/.mujoco/mujoco200/bin/simulate file_path</code> 。你可能需要通过反复调整参数和在Mujoco中查看模型来进行一些微调。在XML文件中除了感兴趣的关节，先注释掉所有其它的关节，会使测试更容易。</p>
<p>最后，希望这些经验能够对你有所帮助，建模愉快。</p>
<h2 id="一些问题和解决方法">一些问题和解决方法</h2>
<ul>
<li><strong>SketchUp - 导入模型后看不到它</strong></li>
</ul>
<p>很可能是导入过程中选择的单位不正确，对象实在太小，看不清。打开STL文件时，在打开的文件窗口中选择你的文件，然后点击 "导入 "旁边的选项按钮来更改单位。</p>
<ul>
<li><strong>Mujoco - 我的手臂不动了，或者稍微移动一下就停止了。</strong></li>
</ul>
<p>在这种情况下，你很可能有链接之间的碰撞。可以在链接之间添加一个小的间隙（确保在随后的链接和关节中考虑到这种转变），或者可以使用contype和conaffinity标签来设置模型，以便不计算两个组件之间的碰撞。</p>
<p>例如，上述示例XML中，将链接之间的接触geom设置为具有不同的contype和conaffinity值，这样它们就不会相互刮擦而阻止运动。</p>
<ul>
<li><strong>Mujoco - 我的模型的一部分在疯狂地旋转。</strong></li>
</ul>
<p>这通常是由于被实例化后与模型的另一部分接触而产生的。有时看起来不同的模型段之间显然没有接触，但实际上是有的，因为接触动力学是如此计算的。</p>
<p>只支持凸形。在模型运行时按 F1，可以查看用于计算接触动力学的形状。</p>
<ul>
<li><strong>脖子和下巴之间没有空间</strong></li>
</ul>
<p>为了解决这个问题，你需要分解成多个组件STL文件，然后在XML中把它们拼接起来。例如，在上面的骨架中，你需要把它分解成头骨和脊柱STL。</p>

  </article>

  
    
  <div class="nexmoe-post-copyright">
    <strong>本文作者：</strong>SuSu<br>
    <strong>本文链接：</strong><a href="https://su-lemon.gitee.io/post/bfad3f82.html" title="https:&#x2F;&#x2F;su-lemon.gitee.io&#x2F;post&#x2F;bfad3f82.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;su-lemon.gitee.io&#x2F;post&#x2F;bfad3f82.html</a><br>
    
      <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
    
  </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/Tools/">Tools</a>
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Mujoco/" rel="tag">Mujoco</a> <a class="nexmoefont icon-tag-fill -none-link" href="/tags/RL/" rel="tag">RL</a> <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Tools/" rel="tag">Tools</a>
    
</div>

  <div class="nexmoe-post-footer">
    <section class="nexmoe-comment">
    
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="/js/md5.min.js"></script>
<div id="gitalk"></div>
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    // var gitalk = new Gitalk({
    //   clientID: '',
    //   clientSecret: '',
    //   repo: 'gittalk-comments.github.io',
    //   owner: 'Su-Lemon',
    //   admin: 'Su-Lemon',
    //   id: 'location.pathname',
    //   labels: 'Gitalk'.split(',').filter(l => l),
    // //   perPage: '15',
    //   pagerDirection: 'last',
    //   createIssueManually: 'true',
    //   distractionFreeMode: 'false'
    // })
    idCfg = ""
    secretCfg = ""
    repoCfg = "gittalk-comments.github.io"
    ownerCfg = "Su-Lemon"
    adminCfg = "Su-Lemon"
    var gitalk = new Gitalk({
      clientID: idCfg,
      clientSecret: secretCfg,
      repo: repoCfg,
      owner: ownerCfg,
      admin: adminCfg,
      id: md5(location.pathname),
      labels: ['Gitalk'],
      perPage: 15,
      pagerDirection: 'last',
      createIssueManually: true,
      distractionFreeMode: false
    })
    gitalk.render('gitalk')
</script>
    
</section>

  </div>
</div>

<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
</script>


  
  <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <!-- 给MathJax元素添加has-jax class -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        Tex: {equationNumbers: {autoNumber: ["AMS"], useLabelIds: true}},
        "HTML-CSS": {linebreaks: {automatic: true}},
        SVG: {linebreaks: {automatic: true}}
    });
  </script>
  <!-- 通过连接CDN加载MathJax的js代码 -->
  <script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML">
  </script>




        <div class="nexmoe-post-right">
          
            <div class="nexmoe-fixed">
              <div class="nexmoe-tool">
                <a href="#" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
              </div>
            </div>
          
        </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script>
	hljs.initHighlightingOnLoad();
</script>

<!-- <script src="<= theme.cdn.jquery.js "></script> -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 <script src="https://su-lemon.gitee.io/js/app.js?v=1653276122642"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

<!--  -->
<script src="https://su-lemon.gitee.io/lib/google-code-prettify/src/prettify.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('pre').addClass('prettyprint linenums').attr('style', 'overflow:scroll;');;
		$('code').addClass('prettyprint');
		prettyPrint();
	})
</script>

  





</body>

</html>
